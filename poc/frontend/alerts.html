<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="TC Agro Solutions - Alerts Management" />
    <link rel="icon" type="image/svg+xml" href="./favicon.svg" />
    <title>Alerts | TC Agro Solutions</title>
    <link rel="stylesheet" href="./css/style.css" />
  </head>
  <body>
    <div class="app-container">
      <!-- Sidebar -->
      <aside id="sidebar" class="sidebar">
        <div class="sidebar-header">
          <span class="sidebar-logo">üåæ</span>
          <span class="sidebar-brand">TC Agro</span>
        </div>
        
        <nav class="sidebar-nav">
          <div class="nav-section">
            <div class="nav-section-title">Main</div>
            <a href="dashboard.html" class="nav-item">
              <span class="nav-icon">üìä</span>
              <span class="nav-text">Dashboard</span>
            </a>
            <a href="properties.html" class="nav-item">
              <span class="nav-icon">üèòÔ∏è</span>
              <span class="nav-text">Properties</span>
            </a>
            <a href="plots.html" class="nav-item">
              <span class="nav-icon">üå±</span>
              <span class="nav-text">Plots</span>
            </a>
            <a href="sensors.html" class="nav-item">
              <span class="nav-icon">üì°</span>
              <span class="nav-text">Sensors</span>
            </a>
            <a href="users.html" class="nav-item">
              <span class="nav-icon">üë•</span>
              <span class="nav-text">Users</span>
            </a>
          </div>

          <div class="nav-section">
            <div class="nav-section-title">Monitoring</div>
            <a href="sensors-monitoring.html" class="nav-item">
              <span class="nav-icon">üì°</span>
              <span class="nav-text">Sensors</span>
            </a>
            <a href="alerts.html" class="nav-item active">
              <span class="nav-icon">üîî</span>
              <span class="nav-text">Alerts</span>
              <span id="alerts-nav-pending-count" class="badge badge-danger" style="margin-left: auto">0</span>
            </a>
          </div>

          <div class="nav-section">
            <div class="nav-section-title">Account</div>
            <a href="#" class="nav-item" data-action="logout">
              <span class="nav-icon">üö™</span>
              <span class="nav-text">Logout</span>
            </a>
          </div>
        </nav>
      </aside>

      <div id="sidebarOverlay" class="sidebar-overlay"></div>

      <!-- Main Content -->
      <main class="main-content">
        <header class="topbar">
          <div class="topbar-left">
            <button id="menuToggle" class="menu-toggle">‚ò∞</button>
            <h1 class="page-title">Alerts</h1>
          </div>
          <div class="topbar-right">
            <div class="user-menu">
              <div class="user-avatar">üë§</div>
              <span id="userDisplay" class="user-name">User</span>
            </div>
          </div>
        </header>

        <div class="content">
          <!-- Page Header -->
          <div class="page-header">
            <div class="page-header-title">
              <span class="page-header-icon">üîî</span>
              <div>
                <div class="breadcrumb">
                  <a href="sensors-monitoring.html">Monitoring</a>
                  <span class="breadcrumb-separator">/</span>
                  <span>Alerts</span>
                </div>
                <h2 style="margin: 0">Alert Management</h2>
              </div>
            </div>
            <div class="page-header-actions">
              <span
                id="alerts-updating-indicator"
                class="text-muted"
                style="font-size: 0.85em; display: none"
              >
                Updated just now
              </span>
              <button id="refresh-alerts" class="btn btn-outline" type="button">‚ü≥ Refresh</button>
            </div>
          </div>

          <!-- Alert Stats -->
          <div class="stats-grid" style="margin-bottom: 24px">
            <div class="stat-card">
              <div
                class="stat-icon"
                style="background: linear-gradient(135deg, #dc3545 0%, #f14668 100%)"
              >
                üö®
              </div>
              <div class="stat-info">
                <span id="alerts-stat-critical" class="stat-value">0</span>
                <span class="stat-label">Critical</span>
              </div>
            </div>
            <div class="stat-card">
              <div
                class="stat-icon"
                style="background: linear-gradient(135deg, #ffc107 0%, #ffdd57 100%)"
              >
                ‚ö†Ô∏è
              </div>
              <div class="stat-info">
                <span id="alerts-stat-warning" class="stat-value">0</span>
                <span class="stat-label">Warning</span>
              </div>
            </div>
            <div class="stat-card">
              <div
                class="stat-icon"
                style="background: linear-gradient(135deg, #17a2b8 0%, #3498db 100%)"
              >
                ‚ÑπÔ∏è
              </div>
              <div class="stat-info">
                <span id="alerts-stat-info" class="stat-value">0</span>
                <span class="stat-label">Info</span>
              </div>
            </div>
            <div class="stat-card">
              <div
                class="stat-icon"
                style="background: linear-gradient(135deg, #28a745 0%, #48c774 100%)"
              >
                ‚úÖ
              </div>
              <div class="stat-info">
                <span id="alerts-stat-resolved-today" class="stat-value">0</span>
                <span class="stat-label">Resolved Today</span>
              </div>
            </div>
          </div>

          <!-- Filters -->
          <div class="card" style="margin-bottom: 24px">
            <div class="form-row alerts-filters-row">
              <div class="form-group alerts-filter-grow" style="margin-bottom: 0">
                <input
                  type="text"
                  id="search-alerts"
                  class="form-control"
                  placeholder="üîç Search alerts..."
                />
              </div>
              <div class="form-group alerts-filter-grow" style="margin-bottom: 0">
                <select id="alerts-severity-filter" class="form-control form-select">
                  <option value="">All Severity</option>
                  <option value="critical">üö® Critical</option>
                  <option value="warning">‚ö†Ô∏è Warning</option>
                  <option value="info">‚ÑπÔ∏è Info</option>
                </select>
              </div>
              <div class="form-group alerts-filter-grow" style="margin-bottom: 0">
                <select id="alerts-status-filter" class="form-control form-select">
                  <option value="">All Status</option>
                  <option value="pending">‚è≥ Pending</option>
                  <option value="acknowledged">üü° Acknowledged</option>
                  <option value="resolved">‚úÖ Resolved</option>
                </select>
              </div>
              <div class="form-group alerts-filter-actions" style="margin-bottom: 0">
                <button id="clear-alert-filters" class="btn btn-outline btn-sm" type="button">
                  ‚úñ Clear filters
                </button>
              </div>
            </div>
          </div>

          <!-- Tabs -->
          <div class="tabs" style="margin-bottom: 24px">
            <button class="tab-btn active" data-tab="pending">
              Pending <span class="badge badge-danger" style="margin-left: 8px">0</span>
            </button>
            <button class="tab-btn" data-tab="resolved">
              Resolved <span class="badge badge-success" style="margin-left: 8px">0</span>
            </button>
            <button class="tab-btn" data-tab="all">
              All Alerts <span class="badge badge-info" style="margin-left: 8px">0</span>
            </button>
          </div>

          <div id="alerts-container" class="alert-list">
            <div class="loading">Loading alerts...</div>
          </div>

          <div class="card alerts-pagination-sticky" style="margin-top: 16px; margin-bottom: 24px">
            <div class="d-flex justify-between align-center" style="flex-wrap: wrap; gap: 12px">
              <div class="d-flex align-center" style="gap: 8px">
                <button id="alerts-prev-page" class="btn btn-outline btn-sm" type="button">
                  ‚Üê Previous
                </button>
                <button id="alerts-next-page" class="btn btn-outline btn-sm" type="button">
                  Next ‚Üí
                </button>
              </div>

              <span id="alerts-page-info" class="text-muted" style="font-size: 0.9em">
                Showing 0-0 of 0
              </span>

              <div class="d-flex align-center" style="gap: 8px">
                <label for="alerts-page-size" class="text-muted" style="font-size: 0.9em"
                  >Page size</label
                >
                <select id="alerts-page-size" class="form-control form-select" style="width: 140px">
                  <option value="50">50 / page</option>
                  <option value="100">100 / page</option>
                </select>
              </div>
            </div>
          </div>

          <!-- Alert Rules Info -->
          <div class="card" style="margin-top: 24px">
            <h3 style="margin-bottom: 16px">üìã Active Alert Rules</h3>
            <p class="text-muted" style="margin-bottom: 16px">
              Alerts are generated based on the following default thresholds. Custom thresholds can
              be set per plot.
            </p>
            <div class="table-container">
              <table class="table">
                <thead>
                  <tr>
                    <th>Metric</th>
                    <th>Condition</th>
                    <th>Severity</th>
                    <th>Duration</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>üå± Soil Moisture</td>
                    <td>&lt; 30%</td>
                    <td><span class="badge badge-warning">Warning</span></td>
                    <td>Immediate</td>
                  </tr>
                  <tr>
                    <td>üå± Soil Moisture</td>
                    <td>&lt; 30% for 24h</td>
                    <td><span class="badge badge-danger">Critical</span></td>
                    <td>24 hours</td>
                  </tr>
                  <tr>
                    <td>üå°Ô∏è Temperature</td>
                    <td>&gt; 35¬∞C</td>
                    <td><span class="badge badge-warning">Warning</span></td>
                    <td>Immediate</td>
                  </tr>
                  <tr>
                    <td>üíß Humidity</td>
                    <td>&lt; 40%</td>
                    <td><span class="badge badge-warning">Warning</span></td>
                    <td>Immediate</td>
                  </tr>
                  <tr>
                    <td>üì° Sensor Status</td>
                    <td>Offline</td>
                    <td><span class="badge badge-danger">Critical</span></td>
                    <td>&gt; 1 hour</td>
                  </tr>
                  <tr>
                    <td>üîã Battery Level</td>
                    <td>&lt; 20%</td>
                    <td><span class="badge badge-warning">Warning</span></td>
                    <td>Immediate</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </main>
    </div>

    <style>
      /* Tab styles */
      .tabs {
        display: flex;
        gap: 8px;
        border-bottom: 2px solid #e0e0e0;
        padding-bottom: 0;
      }

      .tab-btn {
        padding: 12px 24px;
        border: none;
        background: none;
        font-size: 1em;
        cursor: pointer;
        color: #666;
        border-bottom: 3px solid transparent;
        margin-bottom: -2px;
        transition: all 0.2s ease;
      }

      .tab-btn:hover {
        color: #2d5016;
      }

      .tab-btn.active {
        color: #2d5016;
        font-weight: 600;
        border-bottom-color: #2d5016;
      }

      /* Alert list styles */
      .alert-list {
        display: flex;
        flex-direction: column;
        gap: 16px;
      }

      .alert-item {
        display: flex;
        gap: 16px;
        padding: 20px;
        background: white;
        border-radius: 12px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
        border-left: 4px solid #ddd;
      }

      .alert-item.critical {
        border-left-color: #dc3545;
        background: linear-gradient(90deg, #fff5f5 0%, white 10%);
      }

      .alert-item.warning {
        border-left-color: #ffc107;
        background: linear-gradient(90deg, #fffbeb 0%, white 10%);
      }

      .alert-item.info {
        border-left-color: #17a2b8;
        background: linear-gradient(90deg, #f0f9ff 0%, white 10%);
      }

      .alert-item.resolved {
        border-left-color: #28a745;
        opacity: 0.8;
      }

      .alert-item-icon {
        font-size: 2em;
        flex-shrink: 0;
      }

      .alert-item-content {
        flex: 1;
      }

      .alert-item-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 8px;
      }

      .alert-item-time {
        color: #999;
        font-size: 0.85em;
      }

      .alert-item-title {
        margin: 0 0 8px 0;
        font-size: 1.1em;
      }

      .alert-item-description {
        color: #666;
        margin: 0 0 12px 0;
        line-height: 1.5;
      }

      .alert-item-meta {
        display: flex;
        flex-wrap: wrap;
        gap: 16px;
        margin-bottom: 16px;
        font-size: 0.9em;
        color: #888;
      }

      .alert-item-actions {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
      }

      .alerts-filters-row {
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .alerts-filter-grow {
        flex: 1 1 0;
        min-width: 0;
      }

      .alerts-filter-actions {
        display: flex;
        justify-content: flex-end;
        align-items: center;
        margin-left: auto;
      }

      .alerts-filter-actions .btn {
        white-space: nowrap;
      }

      .alerts-pagination-sticky {
        position: sticky;
        bottom: 12px;
        z-index: 20;
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(6px);
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
      }

      .alerts-pagination-sticky::before {
        content: '';
        position: absolute;
        left: 0;
        right: 0;
        top: -16px;
        height: 16px;
        pointer-events: none;
        background: linear-gradient(to top, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0));
      }

      @media (max-width: 768px) {
        .alert-item {
          flex-direction: column;
        }

        .alert-item-icon {
          font-size: 1.5em;
        }

        .tabs {
          flex-wrap: wrap;
        }

        .tab-btn {
          flex: 1;
          text-align: center;
        }

        .alerts-filters-row {
          flex-direction: column;
          align-items: stretch;
        }

        .alerts-filter-actions {
          margin-left: 0;
          justify-content: stretch;
        }

        .alerts-filter-actions .btn {
          width: 100%;
        }

        .alerts-pagination-sticky {
          bottom: 8px;
        }

        .alerts-pagination-sticky::before {
          top: -12px;
          height: 12px;
        }
      }
    </style>

    <!-- Scripts (ES Module) -->
    <script type="module" src="./js/alerts.js"></script>
  </body>
</html>
