apiVersion: v1
kind: ConfigMap
metadata:
  name: sensor-ingest-config
  namespace: agro-apps
data:
  # Runtime
  ASPNETCORE_ENVIRONMENT: "Production"
  ASPNETCORE_URLS: "http://0.0.0.0:8080"
  ASPNETCORE_APPL_PATH: "/sensor-ingest"
  DOTNET_USE_POLLING_FILE_WATCHER: "1"

  # Database (non-sensitive)
  Database__Postgres__Host: "tc-agro-postgres"
  Database__Postgres__Port: "5432"
  Database__Postgres__Database: "tc-agro-sensor-ingest-db"
  Database__Postgres__UserName: "postgres"
  Database__Postgres__Schema: "public"
  Database__Postgres__MaintenanceDatabase: "postgres"
  Database__Postgres__ConnectionTimeout: "30"
  Database__Postgres__MinPoolSize: "2"
  Database__Postgres__MaxPoolSize: "20"

  # Redis (non-sensitive)
  Cache__Redis__Host: "tc-agro-redis"
  Cache__Redis__Port: "6379"
  Cache__Redis__Password: ""
  Cache__Redis__DefaultTTL: "300"

  # RabbitMQ (non-sensitive)
  Messaging__RabbitMQ__Host: "tc-agro-rabbitmq"
  Messaging__RabbitMQ__Port: "5672"
  Messaging__RabbitMQ__ManagementPort: "15672"
  Messaging__RabbitMQ__VirtualHost: "/"
  Messaging__RabbitMQ__Exchange: "sensor-ingest.events"
  Messaging__RabbitMQ__AutoProvision: "true"
  Messaging__RabbitMQ__Durable: "true"
  Messaging__RabbitMQ__UseQuorumQueues: "false"
  Messaging__RabbitMQ__AutoPurgeOnStartup: "true"

  # Service ports
  Services__Identity__HttpPort: "5001"
  Services__Farm__HttpPort: "5002"
  Services__SensorIngest__HttpPort: "5003"
  Services__AnalyticsWorker__HttpPort: "5004"
  Services__Dashboard__HttpPort: "5005"

  # Weather provider (service-specific)
  WeatherProvider__Latitude: "-22.7256"
  WeatherProvider__Longitude: "-47.6492"

  # Logging
  Logging__LogLevel__Default: "Information"
  Logging__LogLevel__Microsoft_AspNetCore: "Warning"
  Logging__LogLevel__System: "Warning"

  # JWT (non-sensitive)
  Auth__Jwt__Issuer: "tc-agro-identity-service"
  Auth__Jwt__Audience__0: "tc-agro-sensor-ingest-service"
  Auth__Jwt__ExpirationInMinutes: "480"

  # Jobs (service-specific)
  Jobs__SensorReadings__Enabled: "true"
  Jobs__SensorReadings__IntervalSeconds: "15"

  # Telemetry (OTEL SDK)
  Telemetry__Grafana__Agent__Host: "otel-collector-agent.observability.svc.cluster.local"
  Telemetry__Grafana__Agent__OtlpGrpcPort: "4317"
  Telemetry__Grafana__Agent__OtlpHttpPort: "4318"
  Telemetry__Grafana__Agent__MetricsPort: "8889"
  Telemetry__Grafana__Agent__Enabled: "true"
  Telemetry__Grafana__Otlp__Endpoint: "http://otel-collector-agent.observability.svc.cluster.local:4317"
  Telemetry__Grafana__Otlp__Protocol: "grpc"
  Telemetry__Grafana__Otlp__TimeoutSeconds: "10"
  Telemetry__Grafana__Otlp__Insecure: "true"

  # OpenTelemetry app block (service-specific)
  OpenTelemetry__Enabled: "true"
  OpenTelemetry__Endpoint: "http://otel-collector-agent.observability:4317"
  OpenTelemetry__Protocol: "grpc"
  OpenTelemetry__ServiceName: "sensor-ingest-service"
  OpenTelemetry__ServiceNamespace: "tc-agro"
  OpenTelemetry__Environment: "development"
  OpenTelemetry__ServiceVersion: "1.0.0"
